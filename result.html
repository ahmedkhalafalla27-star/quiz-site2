<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>Ù†ØªÙŠØ¬ØªÙƒ</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" id="ogTitle">
  <meta property="og:description" id="ogDesc">
  <meta property="og:image" id="ogImage">
  <meta property="og:url" content="" id="ogUrl">

  <link rel="stylesheet" href="style.css">
</head>
<body>

<main class="centered">
  <div class="card result-card" id="resultCard">
    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©...
  </div>
</main>

<script>
const testsMeta = {
  analytical_thinking: {
    title: "ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠ",
    image: "images/social/analytical_thinking.jpg"
  },
  iq_speed: {
    title: "âš¡ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø°ÙƒØ§Ø¡ ÙˆØ³Ø±Ø¹Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ‡Ø©",
    image: "images/social/iq_speed.jpg"
  },
  decision_personality: {
    title: "ğŸ‘¤ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±",
    image: "images/social/decision_personality.jpg"
  },
  football_ahly_zamalek: {
    title: "âš½ ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ù‡Ù„ÙŠ ÙˆØ§Ù„Ø²Ù…Ø§Ù„Ùƒ",
    image: "images/social/football_ahly_zamalek.jpg"
  },
  football: {
    title: "âš½ Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ±ÙˆÙŠØ©",
    image: "images/social/football.jpg"
  },
  fun_general_knowledge: {
    title: "ğŸŒ Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø© Ù…Ù…ØªØ¹",
    image: "images/social/fun_general_knowledge.jpg"
  },
  geo: {
    title: "ğŸ—ºï¸ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
    image: "images/social/geo.jpg"
  },
  iq: {
    title: "ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø°ÙƒØ§Ø¡",
    image: "images/social/iq.jpg"
  },
  math_logic_iq: {
    title: "ğŸ§® ØªÙÙƒÙŠØ± Ù…Ù†Ø·Ù‚ÙŠ ÙˆØ±ÙŠØ§Ø¶ÙŠ",
    image: "images/social/math_logic_iq.jpg"
  },
  personality: {
    title: "ğŸ‘¥ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ©",
    image: "images/social/personality.jpg"
  },
  quran_hifz: {
    title: "ğŸ“– Ø§Ø®ØªØ¨Ø± Ø­ÙØ¸Ùƒ Ù„Ù„Ù‚Ø±Ø¢Ù†",
    image: "images/social/quran_hifz.jpg"
  }
};

(function () {
  const params = new URLSearchParams(location.search);
  const test = params.get("test");
  const data = JSON.parse(localStorage.getItem(`result_${test}`));

  if (!data) {
    document.getElementById("resultCard").innerHTML = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªÙŠØ¬Ø©";
    return;
  }

  const meta = testsMeta[test];
  const percent = Math.round((data.score / data.total) * 100);

  const shareText = `${meta.title}
Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${percent}% ğŸ‘€ğŸ”¥
Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ´ÙˆÙ Ù†ØªÙŠØ¬ØªÙƒ ğŸ‘‡`;

  // OG tags
  document.getElementById("ogTitle").content = meta.title;
  document.getElementById("ogDesc").content = shareText;
  document.getElementById("ogImage").content = location.origin + "/" + meta.image;
  document.getElementById("ogUrl").content = location.href;

  const fbShareUrl =
    "https://www.facebook.com/sharer/sharer.php?u=" +
    encodeURIComponent(location.href);

  document.getElementById("resultCard").innerHTML = `
    <h2>${meta.title}</h2>
    <p>Ù†ØªÙŠØ¬ØªÙƒ: <strong>${percent}%</strong></p>

    <div class="ad-slot">Ù…ÙƒØ§Ù† Ø¥Ø¹Ù„Ø§Ù†</div>

    <a href="${fbShareUrl}" target="_blank" class="btn primary">
      ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ
    </a>

    <br><br>
    <a href="index.html" class="btn secondary">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø£Ø®Ø±Ù‰</a>
  `;
})();
</script>

</body>
</html>
