<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>ูุชูุฌุชู</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<link rel="stylesheet" href="style.css">
</head>
<body>

<main class="centered">
  <div class="card result-card" id="resultCard">
    ุฌุงุฑู ุชุญููู ุงููุชูุฌุฉ...
  </div>
</main>

<script>
const testsMeta = {
  iq: "๐ง ุฐูุงุก ููู",
  analytical_thinking: "๐ง ุชูููุฑ ุชุญูููู",
  iq_speed: "โก ุณุฑุนุฉ ุจุฏููุฉ",
  math_logic_iq: "๐งฎ ุฐูุงุก ููุทูู",
  football: "โฝ ูุนุฑูุฉ ูุฑููุฉ",
  football_ahly_zamalek: "๐ฅ ุชุญุฏู ูุฑูู",
  fun_general_knowledge: "๐ ุซูุงูุฉ ุนุงูุฉ",
  geo: "๐บ๏ธ ุฌุบุฑุงููุง",
  personality: "๐ค ุดุฎุตูุฉ",
  decision_personality: "๐ฅ ูุฑุงุฑุงุช ุดุฎุตูุฉ",
  quran_hifz: "๐ ุญูุธ ุงููุฑุขู"
};

function analyze(percent){
  if(percent >= 90) return "ููุชุงุฒ ุฌุฏูุง";
  if(percent >= 75) return "ููู";
  if(percent >= 60) return "ุฌูุฏ";
  if(percent >= 40) return "ูุชูุณุท";
  return "ุจุญุงุฌุฉ ุชุทููุฑ";
}

(function(){
  const params = new URLSearchParams(location.search);
  const test = params.get("test");
  const result = JSON.parse(localStorage.getItem(`result_${test}`));

  if(!result){
    document.getElementById("resultCard").innerHTML = "ูุง ุชูุฌุฏ ูุชูุฌุฉ";
    return;
  }

  const percent = Math.round(result.score / result.total * 100);
  const analysis = analyze(percent);
  const title = testsMeta[test] || "ุงุฎุชุจุฑ ูุฏุฑุงุชู";

  const shareText = `${title}
ูุชูุฌุชู: ${percent}% ๐ฅ
ุงูุชูููู: ${analysis}
ุงุฎุชุจุฑ ููุณู ๐`;

  const shareURL = encodeURIComponent(location.origin + "/index.html");
  const shareQuote = encodeURIComponent(shareText);

  // ูุญุงููุฉ ูุชุญ ุงูุชุทุจูู
  function shareFacebook(){
    const appLink = `fb://facewebmodal/f?href=https://www.facebook.com/sharer/sharer.php?u=${shareURL}&quote=${shareQuote}`;
    const webLink = `https://www.facebook.com/sharer/sharer.php?u=${shareURL}&quote=${shareQuote}`;

    window.location.href = appLink;

    setTimeout(() => {
      window.open(webLink, "_blank");
    }, 1200);
  }

  document.getElementById("resultCard").innerHTML = `
    <h2>${title}</h2>
    <p>๐ ุงููุชูุฌุฉ: <strong>${percent}%</strong></p>
    <p>๐ง ุงูุชูููู: <strong>${analysis}</strong></p>

    <div class="ad-slot">ููุงู ุฅุนูุงู</div>

    <button class="btn primary" onclick="shareFacebook()">
      ๐ค ูุดุงุฑูุฉ ุนูู ููุณุจูู
    </button>

    <br><br>
    <a href="index.html" class="btn secondary">ุงุฎุชุจุงุฑุงุช ุฃุฎุฑู</a>
  `;
})();
</script>

</body>
</html>
