<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<main class="centered">
  <div class="quiz-card" id="resultCard">
    ุฌุงุฑู ุชุญููู ุงููุชูุฌุฉ...
  </div>
</main>

<script>
const params = new URLSearchParams(location.search);
const test = params.get("test");

const card = document.getElementById("resultCard");
const resultKey = `quiz_${test}_latest`;
const result = JSON.parse(localStorage.getItem(resultKey));

if (!result) {
  card.innerHTML = "โ ูุง ุชูุฌุฏ ูุชูุฌุฉ ูุญููุธุฉ ููุฐุง ุงูุงุฎุชุจุงุฑ";
} else {
  const percent = result.percent;

  // ===== ุชุญุฏูุฏ ุงูุชูููู ุงููุตู =====
  let level = "";
  let description = "";

  if (percent >= 90) {
    level = "ููุชุงุฒ ุฌุฏูุง ๐ฅ";
    description = "ูุฏุฑุงุชู ุนุงููุฉ ุฌุฏูุง ูุชูููุฑู ุณุฑูุน ูุฏููู.";
  } else if (percent >= 75) {
    level = "ููุชุงุฒ ๐";
    description = "ุฃุฏุงุก ููู ููุนู ูุงุถุญ ุจุงูุชูุงุตูู.";
  } else if (percent >= 60) {
    level = "ุฌูุฏ ๐";
    description = "ุฃุฏุงุคู ุฌูุฏ ููู ูููู ุชุญุณููู ุจุงูููุงุฑุณุฉ.";
  } else if (percent >= 40) {
    level = "ููุจูู ๐";
    description = "ูุฏูู ุฃุณุงุณูุงุช ุฌูุฏุฉ ููู ุชุญุชุงุฌ ุชุฑููุฒ ุฃูุซุฑ.";
  } else {
    level = "ุจุญุงุฌุฉ ูุชุทููุฑ โ";
    description = "ุญุงูู ูุฑุฉ ุฃุฎุฑู ูุฑูุฒ ุฃูุซุฑ ูู ุงูุฃุณุฆูุฉ.";
  }

  // ===== ุชุฎุตูุต ุญุณุจ ููุน ุงูุงุฎุชุจุงุฑ =====
  const titles = {
    iq: "ุงุฎุชุจุงุฑ ุงูุฐูุงุก",
    iq_speed: "ุงุฎุชุจุงุฑ ุงูุฐูุงุก ูุณุฑุนุฉ ุงูุจุฏููุฉ",
    analytical_thinking: "ุงุฎุชุจุงุฑ ุงูุชูููุฑ ุงูุชุญูููู",
    math_logic_iq: "ุงุฎุชุจุงุฑ ุงูุชูููุฑ ุงูููุทูู",
    fun_general_knowledge: "ุงุฎุชุจุงุฑ ูุนูููุงุช ุนุงูุฉ",
    geo: "ุงุฎุชุจุงุฑ ุงูุฌุบุฑุงููุง",
    football: "ุงุฎุชุจุงุฑ ูุนูููุงุช ูุฑููุฉ",
    datafootball_ahly_zamalek: "ุงูุฃููู ูุงูุฒูุงูู",
    personality: "ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ",
    decision_personality: "ุดุฎุตูุชู ูู ูุฑุงุฑุงุชู",
    quran_hifz: "ุงุฎุชุจุงุฑ ุญูุธ ุงููุฑุขู"
  };

  const testTitle = titles[test] || "ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ";

  card.innerHTML = `
    <div class="card-inner result">
      <h2>${testTitle}</h2>

      <div class="score-circle">
        <strong>${percent}%</strong>
      </div>

      <p class="result-level">${level}</p>
      <p class="result-text">${description}</p>

      <p class="details">
        ุนุฏุฏ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ:
        <strong>${result.score}</strong> ูู
        <strong>${result.total}</strong>
      </p>

      <div class="controls">
        <a href="index.html" class="btn secondary">๐ ุงูุฑุฆูุณูุฉ</a>
        <a href="start.html?test=${test}" class="btn primary">๐ ุฃุนุฏ ุงูุงุฎุชุจุงุฑ</a>
      </div>
    </div>
  `;
}
</script>

</body>
</html>
