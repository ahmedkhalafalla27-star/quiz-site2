<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>نتيجتك</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="centered">
    <div class="card result-card" id="resultCard">جارٍ التحميل…</div>
  </main>

<script>
function analyze(p){
  if(p>=90) return {level:"ممتاز جداً",advice:"استمر!"};
  if(p>=75) return {level:"جيد جداً",advice:"أداء رائع!"};
  if(p>=60) return {level:"جيد",advice:"يمكنك التحسن أكثر."};
  return {level:"يحتاج تدريب",advice:"درّب عقلك يومياً."};
}

(function(){
  const test=new URL(location.href).searchParams.get("test")||"iq";
  const raw=localStorage.getItem(`quiz_${test}_latest`);
  if(!raw){
    resultCard.innerHTML="<h3>لا توجد نتيجة</h3>";
    return;
  }
  const r=JSON.parse(raw);
  const perf=analyze(r.percent);

  resultCard.innerHTML=`
    <h2>${r.percent}%</h2>
    <div class="circle">${r.score} / ${r.total}</div>

    <h3>${perf.level}</h3>
    <p>${perf.advice}</p>

    <div class="ad-slot">إعلان</div>

    <a class="btn primary" href="start.html?test=${test}">إعادة الاختبار</a>
    <a class="btn secondary" href="index.html">اختبارات أخرى</a>

    <div class="ad-slot">إعلان أسفل الصفحة</div>
  `;
})();
</script>

</body>
</html>
