<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ===== Open Graph (Facebook) ===== -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±Ø§ØªÙƒ">
  <meta property="og:title" id="ogTitle" content="Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±Ø§ØªÙƒ">
  <meta property="og:description" id="ogDesc" content="Ø§ÙƒØªØ´Ù Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø§Ù„Ø¢Ù†">
  <meta property="og:image" id="ogImage" content="assets/social/default.jpg">
  <meta property="og:url" id="ogUrl" content="">

  <title>Ù†ØªÙŠØ¬ØªÙƒ</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<main class="centered">
  <div class="card result-card" id="resultCard">
    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©...
  </div>
</main>

<script>
/* ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ===== */
const TEST_CONFIG = {
  iq: {
    title: "ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø°ÙƒØ§Ø¡",
    share: "ğŸ”¥ Ø§Ø®ØªØ¨Ø±Øª Ø°ÙƒØ§Ø¦ÙŠ ÙˆØ·Ù„Ø¹Øª Ù†ØªÙŠØ¬Ø© Ù‚ÙˆÙŠØ©! Ø¬Ø±Ø¨ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ´ÙˆÙ Ù…Ø³ØªÙˆØ§Ùƒ ğŸ‘‡",
    image: "assets/social/iq.jpg"
  },
  personality: {
    title: "ğŸ‘¤ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ©",
    share: "ğŸ‘€ Ø·Ù„Ø¹Øª Ø´Ø®ØµÙŠØªÙŠ Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø§Ù„Ù…ØªÙˆÙ‚Ø¹! Ø¬Ø±Ø¨ ÙˆØ§Ø¹Ø±Ù Ø´Ø®ØµÙŠØªÙƒ ğŸ‘‡",
    image: "assets/social/personality.jpg"
  },
  math_logic_iq: {
    title: "ğŸ§® Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ",
    share: "ğŸ§® Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù†Ø·Ù‚ÙŠ Ù…Ø­ØªØ§Ø¬ ØªØ±ÙƒÙŠØ²! ØªÙ‚Ø¯Ø± ØªØ¹Ø¯ÙŠÙ‡ØŸ ğŸ‘‡",
    image: "assets/social/math.jpg"
  },
  football: {
    title: "âš½ Ø§Ø®ØªØ¨Ø§Ø± ÙƒØ±ÙˆÙŠ",
    share: "âš½ ØªØ­Ø¯ÙŠ ÙƒØ±ÙˆÙŠ Ø¬Ø§Ù…Ø¯! Ø¬Ø±Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ğŸ‘‡",
    image: "assets/social/football.jpg"
  },
  geo: {
    title: "ğŸŒ Ø§Ø®ØªØ¨Ø§Ø± Ø¬ØºØ±Ø§ÙÙŠØ§",
    share: "ğŸŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¬ØºØ±Ø§ÙÙŠØ© Ù‡ØªØ®Ù„ÙŠÙƒ ØªØ¹ÙŠØ¯ Ø§Ù„ØªÙÙƒÙŠØ± ğŸ‘‡",
    image: "assets/social/geo.jpg"
  },
  fun_general_knowledge: {
    title: "ğŸ’¡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©",
    share: "ğŸ’¡ Ø£Ø³Ø¦Ù„Ø© Ù…Ø´ Ù…Ù…Ù„Ø© Ø®Ø§Ù„Øµ! Ø¬Ø±Ø¨ Ø¨Ù†ÙØ³Ùƒ ğŸ‘‡",
    image: "assets/social/general.jpg"
  },
  quran_hifz: {
    title: "ğŸ“– Ø§Ø®ØªØ¨Ø± Ø­ÙØ¸Ùƒ Ù„Ù„Ù‚Ø±Ø¢Ù†",
    share: "ğŸ“– Ø§Ø®ØªØ¨Ø±Øª Ø­ÙØ¸ÙŠ Ù„Ù„Ù‚Ø±Ø¢Ù†.. Ù‡Ù„ ØªØ³ØªØ·ÙŠØ¹ØŸ ğŸ‘‡",
    image: "assets/social/quran.jpg"
  }
};

/* ===== ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© ===== */
function analyze(percent) {
  if (percent >= 85) return "ğŸ”¥ Ù…Ø³ØªÙˆÙ‰ Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ù‹Ø§";
  if (percent >= 65) return "ğŸ’ª Ù…Ø³ØªÙˆÙ‰ Ù‚ÙˆÙŠ";
  if (percent >= 45) return "ğŸ‘ Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·";
  return "ğŸ“˜ ÙŠØ­ØªØ§Ø¬ ØªØ¯Ø±ÙŠØ¨";
}

/* ===== Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© ===== */
(function () {
  const params = new URLSearchParams(location.search);
  const test = params.get("test") || "iq";

  const cfg = TEST_CONFIG[test] || {
    title: "Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±Ø§ØªÙƒ",
    share: "Ø¬Ø±Ø¨ Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±Ø§ØªÙƒ ÙˆØ§Ø¹Ø±Ù Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ğŸ‘‡",
    image: "assets/social/default.jpg"
  };

  const data = localStorage.getItem(`result_${test}`) ||
               localStorage.getItem(`quiz_${test}_latest`);

  if (!data) {
    document.getElementById("resultCard").innerHTML = `
      <h2>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªÙŠØ¬Ø©</h2>
      <a class="btn primary" href="index.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    `;
    return;
  }

  const result = JSON.parse(data);
  const percent = Math.round((result.score / result.total) * 100);
  const analysis = analyze(percent);

  /* ØªØ­Ø¯ÙŠØ« OG */
  document.getElementById("ogTitle").content = cfg.title;
  document.getElementById("ogDesc").content = cfg.share;
  document.getElementById("ogImage").content = location.origin + "/" + cfg.image;
  document.getElementById("ogUrl").content = location.href;

  document.getElementById("resultCard").innerHTML = `
    <h2>${cfg.title}</h2>

    <div class="circle">${percent}%</div>

    <h3>${analysis}</h3>
    <p>Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©: <b>${result.score}</b> Ù…Ù† <b>${result.total}</b></p>

    <div class="ad-slot">Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§</div>

    <div style="margin-top:20px">
      <button class="btn primary" id="shareBtn">ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ</button>
      <br><br>
      <a class="btn ghost" href="index.html">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø£Ø®Ø±Ù‰</a>
    </div>
  `;

  /* Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© */
  document.getElementById("shareBtn").onclick = function () {
    const shareUrl = encodeURIComponent(location.href);
    const quote = encodeURIComponent(cfg.share);

    const fbApp =
      "fb://facewebmodal/f?href=" +
      encodeURIComponent(
        `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${quote}`
      );

    const fbWeb =
      `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${quote}`;

    window.location.href = fbApp;
    setTimeout(() => window.open(fbWeb, "_blank"), 1200);
  };
})();
</script>

</body>
</html>
